\begin{frame}[fragile,label=ownerRulesExer]{ownership exercise}
If called like \texttt{p = foo(p)}, which follow single-owner rule? \\
\begin{minipage}{0.5\textwidth}
\begin{lstlisting}[language=C,style=smaller]
// (A)
char *foo(char *p) {
    free(p);
    return NULL;
}

// (B)
char *foo(char *p) {
    p = realloc(p, strlen(p) + 100);
    strcat(p, "test");
    return p;
}
\end{lstlisting}
\end{minipage}
\begin{minipage}{0.5\textwidth}
\begin{lstlisting}[language=C,style=smaller]
// (C)
char *global;
char *foo(char *p) {
    if (p) free(p);
    return global;
}

// (D)
char *foo(char *p) {
    p[0] = 'A';
    return p;
}
\end{lstlisting}
\end{minipage}
\end{frame}
