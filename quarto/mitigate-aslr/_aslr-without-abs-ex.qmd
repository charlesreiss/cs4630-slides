
### exercise: avoiding absolute addresses  {.smaller}

<!-- \lstset{
    language=myasm,
    style=smaller,
    escapeinside=~~,
} -->
 
:::: {.columns}

::: {.column width="50%"}
 
```
foo:
	movl	$3, %eax
	cmpq	$5, %rdi
	ja	defaultCase
	jmp	*lookupTable(,%rdi,8)
returnOne:
        movl    $1, %eax
        ret
returnTwo:
        movl    $2, %eax
defaultCase:
        ret

```
 
:::

::: {.column width="50%"}
 
```
lookupTable:
    .quad returnOne
    .quad returnTwo
    .quad returnOne
    .quad returnTwo
    .quad returnOne
    .quad returnOne

```
 
:::

::::
 

* exercise: rewrite this without absolute addresses
* but fast

