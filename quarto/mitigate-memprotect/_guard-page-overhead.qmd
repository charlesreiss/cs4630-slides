
### exercise: guard page overhead  {.smaller}


* suppose heap allocations are: 

   * $100\,000$ objects of 100 bytes
   * $1\,000$ objects of 1000 bytes
   * $100$ objects of approx. 10000 bytes

* total allocation of approx 12 000 KB
* assuming 4KB pages, estimate space overhead of using guard pages: 

   * for objects larger than 4096 bytes (1 page)
   * for objects larger than 200 bytes
   * for all objects



### solution{.smaller}

* $100$ objects of approx. 10000 bytes 
   * need to pad to 12288 (3 x 4096) bytes
   * $228\,800$ wasted bytes for $1\,000\,000$ bytes of allocations
* $1\,000$ objects of approx. 1000 bytes 
   * need to pad to (4096) bytes
   * $3\,049\,000$ wasted bytes for $1\,000\,000$ bytes of allocations
* $100\,000$ objects of approx 100 bytes 
   * need to pad to (4096) bytes
   * $399\,600\,00$ wasted bytes for $10\,000\,000$ bytes of allocations
* (add up above, depending which case)
