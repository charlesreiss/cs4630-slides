\documentclass[tikz]{standalone}
\input{common/tikzBase}
\usetikzlibrary{}
\newsavebox{\subterExAC}
\newsavebox{\subterExAAsm}
\begin{document}
\begin{lrbox}{\subterExAC}
\begin{lstlisting}[language=C,style=size9]
void vulnerable() {
    int *array;
    char buffer[100];
    if (!Allocate(&array))
        abort();
    gets(buffer);
    array[0] = atoi(buffer);
    ...
}
\end{lstlisting}
\end{lrbox}
\begin{lrbox}{\subterExAAsm}
\begin{lstlisting}[language=myasm,style=size9]
vulnerable:
    pushq %rbp
    pushq %rbx
    subq  $136, %rsp
    movq  %fs:40, %rax
    movq  %rax, 120(%rsp)
    xorl  %eax, %eax
    leaq  104(%rsp), %rdi
    call  Allocate
    testl %eax, %eax
    je    call_abort
    movq  %rsp, %rdi
    call  gets
    movq  104(%rsp), %rbp
    movl  $10, %edx
    movl  $0, %esi
    movq  %rsp, %rdi
    call  strtol
    movl  %eax, 0(%rbp)
    ...
\end{lstlisting}
\end{lrbox}

\setSlide{1}
\input{overflow-subterfuge/texfig/simple-subter-ex-exercise-1.inner.tex}
\end{document}
