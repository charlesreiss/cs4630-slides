\documentclass[tikz]{standalone}
\input{common/tikzBase}
\usetikzlibrary{}
\newsavebox{\ropChainAlignExC}
\newsavebox{\ropChainAlignExAsm}
\begin{document}
\begin{lrbox}{\ropChainAlignExC}
\begin{lstlisting}[language=C++,style=smaller]
void getInitials(char *init) {
    char first[50]; char second[50];
    scanf("%s%s", first, second);
    init[0] = first[0];
    init[1] = second[0];
}
\end{lstlisting}
\end{lrbox}
\begin{lrbox}{\ropChainAlignExAsm}
\begin{lstlisting}[language=myasm,style=smaller]
getInitials: push %rbx
xor    %eax,%eax
mov    %rdi,%rbx
// lea "%s%s" -> %rdi
lea    0xe6e(%rip),%rdi 
sub    $0xa0,%rsp
// &second[0] -> %rdx
lea    0x50(%rsp),%rdx 
// &first[0] -> %rsi
mov    %rsp,%rsi
call   __isoc99_scanf@plt
mov    (%rsp),%al
mov    %al,(%rbx)
mov    0x50(%rsp),%al
mov    %al,0x1(%rbx)
add    $0xa0,%rsp
pop    %rbx
ret 
\end{lstlisting}
\end{lrbox}

\setSlide{1}
\input{rop/texfig/ropChainAlignEx.inner.tex}
\end{document}
