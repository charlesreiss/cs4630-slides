\documentclass[tikz]{standalone}
\input{common/tikzBase}
\usetikzlibrary{calc}
\lstset{
    language=C++,
    style=smaller,
    moredelim={**[is][\btHL<2>]{~2~}{~end~}},
}
\newsavebox{\vulnUAFCode}
\tikzset{
    stackBox/.style={very thick},
    onStack/.style={thick},
}
\begin{document}
\begin{lrbox}{\vulnUAFCode}
\begin{lstlisting}
class Foo {
    ...
};
Foo *the_foo;
the_foo = new Foo;
...
delete the_foo;
...
something_else = new Bar(...);
the_foo->something();
\end{lstlisting}
\end{lrbox}

\setSlide{1}
\input{uaf/texfig/vulnUAF.inner.tex}
\setSlide{2}
\input{uaf/texfig/vulnUAF.inner.tex}
\end{document}
